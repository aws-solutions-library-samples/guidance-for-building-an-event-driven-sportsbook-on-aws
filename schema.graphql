type Wallet @aws_cognito_user_pools @aws_iam {
  userId: ID!
  balance: Float!
}

type Event @aws_cognito_user_pools @aws_iam {
  eventId: ID!
  odds: String!
  home: String!
  away: String!
  start: AWSDateTime!
  end: AWSDateTime!
}

type EventList {
  items: [Event]!
  nextToken: String
}

interface Error {
  message: String!
}

type NotFoundError implements Error @aws_cognito_user_pools @aws_iam {
  message: String!
}

type InputError implements Error @aws_cognito_user_pools @aws_iam {
  message: String!
}

type UnknownError implements Error @aws_cognito_user_pools @aws_iam {
  message: String!
}

union WalletResult = Wallet | NotFoundError | InputError | UnknownError
union EventResult = Event | NotFoundError | InputError | UnknownError
union EventsResult = EventList | NotFoundError | InputError | UnknownError

input CreateWalletInput {
  userId: ID!
}

input WithdrawOrDepositInput {
  amount: Float!
}

input UpdateEventOddsInput {
  eventId: ID!
  odds: String!
}

type Query {
  getEvents(startKey: String): EventsResult @aws_cognito_user_pools @aws_iam
  getWallet: WalletResult @aws_cognito_user_pools
  getWalletByUserId(userId: ID!): WalletResult @aws_iam
}

type Mutation {
  createWallet(input: CreateWalletInput): WalletResult @aws_iam
  depositFunds(input: WithdrawOrDepositInput): WalletResult @aws_cognito_user_pools
  updateEventOdds(input: UpdateEventOddsInput): EventResult @aws_iam
  withdrawFunds(input: WithdrawOrDepositInput): WalletResult @aws_cognito_user_pools
}

type Subscription {
    events: EventResult @aws_subscribe(mutations: ["updateEventOdds"])
}

schema {
  query: Query
  mutation: Mutation
}
