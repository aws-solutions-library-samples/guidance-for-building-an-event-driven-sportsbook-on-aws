# Wallet service
type Wallet @aws_cognito_user_pools @aws_iam {
  userId: ID!
  balance: Float!
}

interface Error {
  message: String!
}

type NotFoundError implements Error @aws_cognito_user_pools @aws_iam {
  message: String!
}

type InputError implements Error @aws_cognito_user_pools @aws_iam {
  message: String!
}

type UnknownError implements Error @aws_cognito_user_pools @aws_iam {
  message: String!
}

union WalletResult = Wallet | NotFoundError | InputError | UnknownError

input CreateWalletInput {
  userId: ID!
}

input WithdrawOrDepositInput {
  amount: Float!
}

type Query {
  getWallet: WalletResult @aws_cognito_user_pools
  getWalletByUserId(userId: ID!): WalletResult @aws_iam
}

type Mutation {
  createWallet(input: CreateWalletInput): WalletResult @aws_iam
  withdrawFunds(input: WithdrawOrDepositInput): WalletResult @aws_cognito_user_pools
  depositFunds(input: WithdrawOrDepositInput): WalletResult @aws_cognito_user_pools
}

schema {
  query: Query
  mutation: Mutation
}
